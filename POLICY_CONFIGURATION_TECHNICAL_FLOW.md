# ğŸ¯ OWNER POLICY CONFIGURATION - IMPLEMENTATION DIAGRAM

## User Interface Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OWNER DASHBOARD PAGE                         â”‚
â”‚  /owner/dashboard/                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ğŸ“Š OWNER Statistics                                            â”‚
â”‚  â”œâ”€ Total Companies: 2                                          â”‚
â”‚  â”œâ”€ Total Employees: 150                                        â”‚
â”‚  â””â”€ Monthly Spend: $5,000                                       â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“‹ COMPANIES OVERVIEW (Last 30 Days)                      â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  COMPANY CARD 1: DataSoft                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚ Name: DataSoft                                     â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Email: contact@datasoft.com                        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Status: ACTIVE                                     â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Plan: Professional                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Seats: 50/100                                      â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Usage: 12,500m / 450 sessions                      â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Screenshots: 1,200                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Storage: 15.5 GB                                   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Last Sync: Dec 20, 14:35                           â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ [ğŸ‘ï¸View] [âœï¸Edit] [âš™ï¸Policy] [ğŸ“¦Plan]              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚          [ğŸ”Reset] [ğŸš«Suspend] [ğŸ”‘Rotate]         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚          ^^^^^^^^                                  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚          CLICK THIS BUTTON â† NEW!                 â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  COMPANY CARD 2: Arts of Tech                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚ Name: Arts of Tech                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Email: hello@artsoftech.com                        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Status: ACTIVE                                     â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Plan: Startup                                      â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Seats: 25/50                                       â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Usage: 8,300m / 280 sessions                       â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Screenshots: 800                                   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Storage: 9.2 GB                                    â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Last Sync: Dec 20, 14:32                           â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ [ğŸ‘ï¸View] [âœï¸Edit] [âš™ï¸Policy] [ğŸ“¦Plan]              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚          [ğŸ”Reset] [ğŸš«Suspend] [ğŸ”‘Rotate]         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚          ^^^^^^^^                                  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚          CLICK THIS BUTTON â† NEW!                 â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
                      CLICK [âš™ï¸ Policy]
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              POLICY CONFIGURATION PAGE                          â”‚
â”‚  /owner/company/{id}/policy/                                    â”‚
â”‚  Example: /owner/company/1/policy/ (DataSoft)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ğŸ¯ Tracking Policy Configuration                               â”‚
â”‚  Company: DataSoft                                              â”‚
â”‚  Config Version: 15                                             â”‚
â”‚  Last Updated: Dec 20, 14:35:22                                 â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœ… FEATURE TOGGLES                                      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â˜‘ Enable Screenshots           â† Toggle on/off         â”‚   â”‚
â”‚  â”‚ â˜‘ Enable Website Tracking                              â”‚   â”‚
â”‚  â”‚ â˜‘ Enable Application Tracking                          â”‚   â”‚
â”‚  â”‚ â˜‘ Enable Keyboard Tracking                             â”‚   â”‚
â”‚  â”‚ â˜‘ Enable Mouse Tracking                                â”‚   â”‚
â”‚  â”‚ â˜‘ Enable Idle Detection                                â”‚   â”‚
â”‚  â”‚ â˜‘ Show Tracker Notification                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â±ï¸  TIMING CONFIGURATION                                â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Screenshot Interval (seconds): 600 [â”€â”€â”€â”€â”€â”€â”€â”€|â–¶] 600    â”‚   â”‚
â”‚  â”‚ Range: 30 - 3600 seconds                               â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ Idle Threshold (seconds): 300 [â”€â”€â”€â”€â”€â”€â”€â”€|â–¶] 300         â”‚   â”‚
â”‚  â”‚ Range: 60 - 1800 seconds                               â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ Config Sync Interval (seconds): 10 [|â–¶â”€â”€â”€â”€â”€â”€â”€â”€] 10     â”‚   â”‚
â”‚  â”‚ Range: 5 - 60 seconds                                  â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ Notification Interval (minutes): 30 [â”€â”€â”€â”€â”€â”€â”€â”€|â–¶] 30    â”‚   â”‚
â”‚  â”‚ Range: 0 - 120 minutes                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“¸ QUALITY & STORAGE                                    â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Max Screenshot Size (MB): 5 [|â–¶â”€â”€â”€â”€â”€â”€â”€â”€] 5              â”‚   â”‚
â”‚  â”‚ Range: 1 - 50 MB                                        â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ Screenshot Quality (%): 85 [â”€â”€â”€â”€â”€â”€â”€â”€|â–¶] 85              â”‚   â”‚
â”‚  â”‚ Range: 50 - 95%                                         â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ Local Data Retention (days): 30 [â”€â”€â”€â”€â”€â”€â”€â”€|â–¶] 30         â”‚   â”‚
â”‚  â”‚ Range: 7 - 365 days                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  [SAVE POLICY]  [CANCEL]                                        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
                      CLICK [SAVE POLICY]
                             â†“
        âœ… Policy updated successfully!
        Version 16 - Changes will sync within 10 seconds
                             â†“
```

## Backend Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DJANGO BACKEND                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  URL ROUTES (core/urls.py)                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ path('policy/',                                         â”‚   â”‚
â”‚  â”‚       policy_configuration_view,                        â”‚   â”‚
â”‚  â”‚       name='policy-configuration')                      â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ path('owner/company/<int:company_id>/policy/',          â”‚   â”‚
â”‚  â”‚       policy_configuration_view,                    â† NEW   â”‚
â”‚  â”‚       name='owner-policy-configuration')                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â†“                                      â”‚
â”‚  VIEW FUNCTION (core/web_views.py)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ def policy_configuration_view(request, company_id=None) â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ if request.user.role == 'OWNER':                        â”‚   â”‚
â”‚  â”‚    âœ… Can access ANY company (if company_id provided)   â”‚   â”‚
â”‚  â”‚    âœ… company = get_object_or_404(Company, id=company_id)   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ elif request.user.role == 'ADMIN':                      â”‚   â”‚
â”‚  â”‚    âœ… Can access OWN company (company_id not needed)    â”‚   â”‚
â”‚  â”‚    âœ… company = request.user.company                    â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ else:                                                   â”‚   â”‚
â”‚  â”‚    âŒ Return error message                              â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ policy, created = CompanyPolicy.objects.get_or_create(  â”‚   â”‚
â”‚  â”‚     company=company)                                    â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ if request.method == 'POST':                            â”‚   â”‚
â”‚  â”‚    - Store old values for audit                         â”‚   â”‚
â”‚  â”‚    - Update policy from form data                       â”‚   â”‚
â”‚  â”‚    - Validate numeric ranges                            â”‚   â”‚
â”‚  â”‚    - Increment version (cache busting)                  â”‚   â”‚
â”‚  â”‚    - Save to database                                   â”‚   â”‚
â”‚  â”‚    - Log audit entry                                    â”‚   â”‚
â”‚  â”‚    - Redirect to same page or dashboard                 â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ return render(..., context)                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â†“                                      â”‚
â”‚  DATABASE (models.py)                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ CompanyPolicy                                           â”‚   â”‚
â”‚  â”‚ â”œâ”€ company (FK â†’ Company)                               â”‚   â”‚
â”‚  â”‚ â”œâ”€ screenshots_enabled (Boolean)                        â”‚   â”‚
â”‚  â”‚ â”œâ”€ website_tracking_enabled (Boolean)                   â”‚   â”‚
â”‚  â”‚ â”œâ”€ app_tracking_enabled (Boolean)                       â”‚   â”‚
â”‚  â”‚ â”œâ”€ screenshot_interval_seconds (Integer)                â”‚   â”‚
â”‚  â”‚ â”œâ”€ idle_threshold_seconds (Integer)                     â”‚   â”‚
â”‚  â”‚ â”œâ”€ config_sync_interval_seconds (Integer)               â”‚   â”‚
â”‚  â”‚ â”œâ”€ max_screenshot_size_mb (Integer)                     â”‚   â”‚
â”‚  â”‚ â”œâ”€ screenshot_quality (Integer)                         â”‚   â”‚
â”‚  â”‚ â”œâ”€ enable_keyboard_tracking (Boolean)                   â”‚   â”‚
â”‚  â”‚ â”œâ”€ enable_mouse_tracking (Boolean)                      â”‚   â”‚
â”‚  â”‚ â”œâ”€ enable_idle_detection (Boolean)                      â”‚   â”‚
â”‚  â”‚ â”œâ”€ show_tracker_notification (Boolean)                  â”‚   â”‚
â”‚  â”‚ â”œâ”€ notification_interval_minutes (Integer)              â”‚   â”‚
â”‚  â”‚ â”œâ”€ local_data_retention_days (Integer)                  â”‚   â”‚
â”‚  â”‚ â”œâ”€ config_version (Integer) â† Auto-increment on save    â”‚   â”‚
â”‚  â”‚ â”œâ”€ created_at (DateTime)                                â”‚   â”‚
â”‚  â”‚ â””â”€ updated_at (DateTime)                                â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ increment_version() method called on save               â”‚   â”‚
â”‚  â”‚ â†’ config_version += 1                                   â”‚   â”‚
â”‚  â”‚ â†’ Triggers cache busting in desktop apps                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â†“                                      â”‚
â”‚  AUDIT LOGGING                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ CompanyAuditLog                                         â”‚   â”‚
â”‚  â”‚ â”œâ”€ Action: "POLICY_CHANGED"                             â”‚   â”‚
â”‚  â”‚ â”œâ”€ Company: DataSoft                                    â”‚   â”‚
â”‚  â”‚ â”œâ”€ User: owner@company.com                              â”‚   â”‚
â”‚  â”‚ â”œâ”€ Old Values: {...}                                    â”‚   â”‚
â”‚  â”‚ â”œâ”€ New Values: {...}                                    â”‚   â”‚
â”‚  â”‚ â”œâ”€ Config Version: 16                                   â”‚   â”‚
â”‚  â”‚ â”œâ”€ Timestamp: 2024-12-20 14:35:22                       â”‚   â”‚
â”‚  â”‚ â””â”€ IP Address: 192.168.1.100                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Desktop App Integration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DESKTOP APP (Python)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  STARTUP (dashboard_ui.py)                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. Create ConfigManager instance                        â”‚   â”‚
â”‚  â”‚    config_manager = ConfigManager(employee_id, company) â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ 2. Schedule polling timer (every 2 seconds)             â”‚   â”‚
â”‚  â”‚    self.config_timer = QTimer()                         â”‚   â”‚
â”‚  â”‚    self.config_timer.timeout.connect(                  â”‚   â”‚
â”‚  â”‚        self.check_config_updates)                       â”‚   â”‚
â”‚  â”‚    self.config_timer.start(2000)  # 2 second intervals  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â†“                                      â”‚
â”‚  POLLING LOOP (every 2 seconds)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ check_config_updates()                                  â”‚   â”‚
â”‚  â”‚ â”œâ”€ Call config_manager.check_for_updates()              â”‚   â”‚
â”‚  â”‚ â”œâ”€ If new version detected:                             â”‚   â”‚
â”‚  â”‚ â”‚  â”œâ”€ Load new config from API                          â”‚   â”‚
â”‚  â”‚ â”‚  â”œâ”€ Save locally (config_cache.json)                  â”‚   â”‚
â”‚  â”‚ â”‚  â””â”€ Apply to tracking system                          â”‚   â”‚
â”‚  â”‚ â””â”€ Continue monitoring                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â†“                                      â”‚
â”‚  CONFIG MANAGER (tracker/config_manager.py)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ check_for_updates()                                     â”‚   â”‚
â”‚  â”‚ â”œâ”€ Fetch current config from API                        â”‚   â”‚
â”‚  â”‚ â”‚  API: GET /api/employee-config/                       â”‚   â”‚
â”‚  â”‚ â”‚  Response: {config: {...}, version: 16}               â”‚   â”‚
â”‚  â”‚ â”œâ”€ Compare with local cached version                    â”‚   â”‚
â”‚  â”‚ â”œâ”€ If version changed:                                  â”‚   â”‚
â”‚  â”‚ â”‚  â”œâ”€ Return True (new config available)                â”‚   â”‚
â”‚  â”‚ â”‚  â””â”€ Apply updated settings                            â”‚   â”‚
â”‚  â”‚ â””â”€ If version same:                                     â”‚   â”‚
â”‚  â”‚    â””â”€ Return False (no update needed)                   â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ get_status_info()                                       â”‚   â”‚
â”‚  â”‚ â”œâ”€ Returns current config state                         â”‚   â”‚
â”‚  â”‚ â”œâ”€ Returns cached config version                        â”‚   â”‚
â”‚  â”‚ â””â”€ Returns last update timestamp                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â†“                                      â”‚
â”‚  LOCAL CONFIG CACHE (tracker/config_cache.json)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ {                                                       â”‚   â”‚
â”‚  â”‚   "company_id": 1,                                      â”‚   â”‚
â”‚  â”‚   "config_version": 16,                                 â”‚   â”‚
â”‚  â”‚   "screenshots_enabled": true,                          â”‚   â”‚
â”‚  â”‚   "website_tracking_enabled": true,                     â”‚   â”‚
â”‚  â”‚   "app_tracking_enabled": true,                         â”‚   â”‚
â”‚  â”‚   "screenshot_interval_seconds": 600,                   â”‚   â”‚
â”‚  â”‚   "idle_threshold_seconds": 300,                        â”‚   â”‚
â”‚  â”‚   "config_sync_interval_seconds": 10,                   â”‚   â”‚
â”‚  â”‚   "max_screenshot_size_mb": 5,                          â”‚   â”‚
â”‚  â”‚   "screenshot_quality": 85,                             â”‚   â”‚
â”‚  â”‚   "enable_keyboard_tracking": true,                     â”‚   â”‚
â”‚  â”‚   "enable_mouse_tracking": true,                        â”‚   â”‚
â”‚  â”‚   "enable_idle_detection": true,                        â”‚   â”‚
â”‚  â”‚   "show_tracker_notification": true,                    â”‚   â”‚
â”‚  â”‚   "notification_interval_minutes": 30,                  â”‚   â”‚
â”‚  â”‚   "local_data_retention_days": 30,                      â”‚   â”‚
â”‚  â”‚   "last_updated": "2024-12-20 14:35:22"                 â”‚   â”‚
â”‚  â”‚ }                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â†“                                      â”‚
â”‚  TRACKING SYSTEM UPDATES                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Apply updated config:                                   â”‚   â”‚
â”‚  â”‚ â”œâ”€ Update screenshot interval timer                     â”‚   â”‚
â”‚  â”‚ â”œâ”€ Update idle threshold check                          â”‚   â”‚
â”‚  â”‚ â”œâ”€ Enable/disable keyboard tracking hook                â”‚   â”‚
â”‚  â”‚ â”œâ”€ Enable/disable mouse tracking hook                   â”‚   â”‚
â”‚  â”‚ â”œâ”€ Update quality settings for next screenshot          â”‚   â”‚
â”‚  â”‚ â”œâ”€ Update notification UI                               â”‚   â”‚
â”‚  â”‚ â””â”€ Continue tracking with new settings                  â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ âœ… All changes applied WITHOUT restart!                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Complete Timeline

```
TIME    OWNER ACTION              BACKEND STATE               DESKTOP APP STATE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

T=0s    â”Œâ”€ Clicks [âš™ï¸ Policy]     
        â”‚  on DataSoft card       
        â””â”€â†’ Navigates to:
           /owner/company/1/policy/
                                  â”œâ”€ Policy page loads
                                  â””â”€ Shows current config
                                     (Version 15)

T=5s    â”Œâ”€ Changes:
        â”‚  Screenshot Interval  
        â”‚  600 â†’ 300 seconds
        â”‚  Screenshot Quality
        â”‚  85 â†’ 90%
        â””â”€â†’ Clicks [SAVE POLICY]
                                  â”œâ”€ Receives POST request
                                  â”œâ”€ Validates input data
                                  â”œâ”€ Updates CompanyPolicy
                                  â”œâ”€ Increments version
                                  â”‚  (15 â†’ 16)
                                  â”œâ”€ Saves to database
                                  â”œâ”€ Creates audit log entry
                                  â”œâ”€ Redirects to same page
                                  â””â”€ Shows success message
                                     "Version 16 - Changes 
                                      will sync within 
                                      10 seconds"
                                                            [Desktop: polling]
                                                            Last version: 15

T=6s    â”Œâ”€ Sees success message
        â”‚  "Version 16"
        â”‚  Policy updated!
        â””â”€ Sees new values
           reflected on page                                 [Polling...]
                                                            [Checking API]

T=10s                                                       â”œâ”€ ConfigManager
                                                            â”‚  checks API
                                                            â”œâ”€ Receives v16
                                                            â”œâ”€ Compares with
                                                            â”‚  cached v15
                                                            â”œâ”€ NEW VERSION
                                                            â”‚  DETECTED!
                                                            â”œâ”€ Downloads new
                                                            â”‚  config from API
                                                            â”œâ”€ Saves locally
                                                            â”‚  (config_cache.json)
                                                            â”œâ”€ Updates timers:
                                                            â”‚  - Screenshot: 300s
                                                            â”‚  - Quality: 90%
                                                            â””â”€ Tracking system
                                                               updated!

T=15s   â”Œâ”€ Navigates back to 
        â”‚  Companies Overview    â”œâ”€ Page refreshes         [Desktop: updated]
        â”‚  Verifies [âš™ï¸ Policy]  â”‚  with new data          All employees now
        â”‚  still visible         â””â”€ Config v16 in DB       using new settings
        â””â”€                                                  No restarts needed!

```

## Key Features Implemented

```
âœ… OWNER Access Control
   â””â”€ OWNER can access any company's policy
   â””â”€ URL includes company_id parameter
   â””â”€ Permission check enforces this

âœ… ADMIN Access Control  
   â””â”€ ADMIN can access only their assigned company
   â””â”€ No company_id parameter needed
   â””â”€ Defaults to request.user.company

âœ… UI Navigation
   â””â”€ Companies Overview cards show [âš™ï¸ Policy] button
   â””â”€ Both dashboard templates updated
   â””â”€ Button positioned prominently
   â””â”€ Tooltip explains function

âœ… Dynamic Redirects
   â””â”€ OWNER access â†’ 'owner-policy-configuration' route
   â””â”€ ADMIN access â†’ 'policy-configuration' route
   â””â”€ Correct route used on success

âœ… Isolated Settings
   â””â”€ Each company has own CompanyPolicy record
   â””â”€ Changes isolated per company
   â””â”€ No data leakage between companies

âœ… Realtime Sync
   â””â”€ Version increment triggers desktop update
   â””â”€ Apps detect within 10 seconds
   â””â”€ Changes apply without restart
   â””â”€ Fallback to cached config if offline

âœ… Audit Logging
   â””â”€ All changes logged
   â””â”€ Old/new values recorded
   â””â”€ User and timestamp tracked
   â””â”€ IP address logged
```

---

**Implementation Complete** âœ…  
**Status**: Ready for Production  
**Testing**: Recommended before rollout
